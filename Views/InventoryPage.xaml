<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="POS_For_Small_Shop.Views.InventoryPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:POS_For_Small_Shop.Views"
    xmlns:model="using:POS_For_Small_Shop.Data.Models"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

	<Grid Margin="10">
		<!-- ListView để hiển thị danh sách nguyên liệu -->
		<ListView ItemsSource="{Binding Ingredients}"
                  SelectedItem="{Binding SelectedIngredient, Mode=TwoWay}"
                  Margin="0,0,0,10">
			<ListView.ItemTemplate>
				<DataTemplate>
					<StackPanel Orientation="Horizontal" Margin="5" VerticalAlignment="Center">
						<TextBlock Text="{Binding IngredientName}" FontSize="16" Margin="5" Width="120"/>
						<TextBlock Text="{Binding Stock}" FontSize="16" Margin="5" Width="50"/>
						<TextBlock Text="{Binding Unit}" FontSize="16" Margin="5" Width="60"/>
						<TextBlock Text="{Binding PurchasePrice}" FontSize="16" Margin="5" Width="80"/>

						<!-- Nút Chỉnh Sửa -->
						<Button Content="✏️"
                                Command="{Binding DataContext.EditCommand, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                CommandParameter="{Binding}"
                                Width="40" Height="30"
                                Margin="5"
                                Background="#FFD700"
                                Foreground="Black"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"/>

						<!-- Nút Xóa -->
						<Button Content="❌"
                                Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource Mode=TemplatedParent}}"
                                CommandParameter="{Binding}"
                                Width="40" Height="30"
                                Margin="5"
                                Background="#FF6347"
                                Foreground="White"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"/>
					</StackPanel>
				</DataTemplate>
			</ListView.ItemTemplate>
		</ListView>

		<!-- Form để Thêm/Sửa Nguyên Liệu -->
		<StackPanel Orientation="Vertical" Margin="0,10,0,0">
			<TextBox PlaceholderText="Name"
                     Text="{Binding NewIngredient.IngredientName, Mode=TwoWay}"
                     Margin="5"
                     Height="40"
                     FontSize="16"/>

			<TextBox PlaceholderText="Stock"
                     Text="{Binding NewIngredient.Stock, Mode=TwoWay}"
                     Margin="5"
                     Height="40"
                     FontSize="16"/>

			<TextBox PlaceholderText="Unit"
                     Text="{Binding NewIngredient.Unit, Mode=TwoWay}"
                     Margin="5"
                     Height="40"
                     FontSize="16"/>

			<TextBox PlaceholderText="Price"
                     Text="{Binding NewIngredient.PurchasePrice, Mode=TwoWay}"
                     Margin="5"
                     Height="40"
                     FontSize="16"/>

			<!-- ComboBox để chọn Category -->
			<ComboBox ItemsSource="{Binding Categories}"
                      DisplayMemberPath="Name"
                      SelectedValuePath="CategoryID"
                      SelectedValue="{Binding NewIngredient.CategoryID}"
                      PlaceholderText="Select Category"
                      Margin="5"
                      Height="40"
                      FontSize="16"/>

			<!-- Nút Thêm -->
			<Button Content="➕ Add Ingredient"
                    Command="{Binding AddCommand}"
                    Margin="5"
                    Height="40"
                    Background="#32CD32"
                    Foreground="White"
                    FontSize="16"/>
		</StackPanel>
	</Grid>
</Page>
